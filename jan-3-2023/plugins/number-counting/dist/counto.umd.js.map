{"version":3,"file":"counto.umd.js","sources":["../src/counto.js"],"sourcesContent":["/**\n *  A jQuery plugin to display numeric values with a nice animation.\n * \n *  Usage:\n *      Instead of \n *          `$(<selector>).val((int)nr);`\n *      use\n *          `$(<selector>).counto((int)nr, timeout, ondone);`\n *      \n *      where `ondone.call(this, nr, old_val)`\n *\n *\n *  @git https://github.com/duzun/jquery.counto\n *\n *  @author Dumitru Uzun (DUzun.Me)\n *  @version 1.1.0\n */\n\n export default function init($) {\n        // ---------------------------------------------------------------------------\n        /// Nice count to nr (by DUzun)\n        function counto(nr,dl,done) {\n            if(!dl) dl = 400;\n            var start = $.now(),\n                end   = start + dl,\n                delay = 10,\n                rwm = parseFloat,\n                rwc,\n                fx = String(nr).split('.');\n            if(typeof xNumber == 'function') {\n                rwm = xNumber;\n                rwc = xNumber;\n            }\n            fx = fx.length > 1 ? fx[1].length : 0;\n            nr = rwm(nr);\n            this.each(function (i, e) {\n                var $this = $(e),\n                    data  = $this.data(),\n                    mh = $this.is(':input') ? 'val' : 'text',\n                    v =  $this[mh](),\n                    val   = rwc ? new rwc(v) : rwm(v),\n                    ofs = Number(val),\n                    last  = ofs,\n                    inter = ofs - nr,\n                    sv = function sv() {\n                        if(data._cto) clearTimeout(data._cto);\n                        var now = $.now(), v;\n                        if(now < end && last != nr) {\n                            v = (ofs - (now-start) / dl * inter).toFixed(fx);\n                            data._cto = setTimeout(sv, delay);\n                        }\n                        else {\n                            v = fx ? nr.toFixed(fx) : nr;\n                            delete data._cto;\n                        }\n                        if(v != last) {\n                            last = v;\n                            rwc ? (val.value = v) : (val = v);\n                            $this[mh](val);\n                        }\n                        if(!data._cto) {\n                            if(typeof done === 'function') done.call(e, nr, val);\n                        }\n                    } ;\n                sv();\n            });\n        }\n\n    return $.fn.counto = counto;\n}\n\nif ( typeof window !== 'undefined' ) {\n    const $ = window.jQuery || window.Zepto;\n    if ( $ ) init($);\n}\n"],"names":["init","$","counto","nr","dl","done","start","now","end","delay","rwm","parseFloat","rwc","fx","String","split","xNumber","length","each","i","e","$this","data","mh","is","v","val","ofs","Number","last","inter","sv","_cto","clearTimeout","toFixed","setTimeout","value","call","fn","window","jQuery","Zepto"],"mappings":"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"}